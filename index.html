<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>南京 CITY WALK 路径规划</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css' rel='stylesheet'/>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.0/mapbox-gl-directions.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.0/mapbox-gl-directions.css" type="text/css"/>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        .directions-container {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            z-index: 1;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            width: 300px;
        }
    </style>
</head>
<body>
    <div id='map'></div>
    <div class="directions-container" id="directions-container">
        <div id="mapbox-directions"></div>
    </div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoieGl1eXVhbnRhbiIsImEiOiJjbHRmZm94ZDUwYWo4MmxyejJscXd0Y2RmIn0.7ldsCfaUSdT8xmTdBwpx_Q';

        var initialCenter = [118.796877, 32.060255]; // 南京的中心点
        var initialZoom = 12;
        var initialPitch = 45;
        var initialBearing = -17.6;

        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/xiuyuantan/clxhlg5z8004q01rnbxh1106u',
            center: initialCenter,
            zoom: initialZoom,
            pitch: initialPitch,
            bearing: initialBearing
        });

        var directions = new MapboxDirections({
            accessToken: mapboxgl.accessToken,
            unit: 'metric',
            profile: 'mapbox/driving',
            alternatives: false,
            geometries: 'geojson',
            controls: { instructions: true }
        });

        document.getElementById('mapbox-directions').appendChild(directions.onAdd(map));

        // 设置初始中心和缩放级别的按钮
        var resetViewButton = document.createElement('button');
        resetViewButton.textContent = '返回初始视角';
        resetViewButton.style.cssText = 'position: absolute; bottom: 30px; left: 10px; background-color: #0078A8; color: white; border: none; padding: 10px; cursor: pointer; z-index: 1;';

        document.body.appendChild(resetViewButton);

        resetViewButton.addEventListener('click', function () {
            map.flyTo({
                center: initialCenter,
                zoom: initialZoom,
                pitch: initialPitch,
                bearing: initialBearing
            });
        });
    </script>
</body>
</html>
